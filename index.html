<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´ URLë§Œ ë„£ìœ¼ë©´ ë„¤ì´ë²„ íŒŒì›Œë§í¬ ê´‘ê³  ì†Œì¬ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•´ë“œë¦½ë‹ˆë‹¤. ì œëª© 15ê°œ, ì„¤ëª… 4ê°œ, ì¶”ì²œ í‚¤ì›Œë“œê¹Œì§€.">
<meta property="og:title" content="íŒŒì›Œë§í¬ ê´‘ê³  ì†Œì¬ ìƒì„±ê¸°">
<meta property="og:description" content="AIê°€ ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´ ìƒí’ˆì„ ë¶„ì„í•´ì„œ íŒŒì›Œë§í¬ ê´‘ê³  ì†Œì¬ë¥¼ ìë™ ìƒì„±í•©ë‹ˆë‹¤">
<title>íŒŒì›Œë§í¬ ê´‘ê³  ì†Œì¬ ìƒì„±ê¸°</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700;800&display=swap');

*{box-sizing:border-box;margin:0;padding:0}
:root{
  --green:#03C75A;--green-dark:#029e48;--green-pale:rgba(3,199,90,.08);
  --navy:#0d1b2a;--navy2:#1a2e42;
  --gray-50:#f8fafc;--gray-100:#f1f4f7;--gray-200:#e2e8ef;
  --gray-400:#94a3b4;--gray-600:#4e6176;--gray-800:#1e2d3d;
  --blue:#1a73e8;--red:#e53e3e;--orange:#f59e0b;
  --shadow-sm:0 1px 3px rgba(0,0,0,.08);
  --shadow:0 4px 16px rgba(0,0,0,.1);
  --shadow-lg:0 20px 60px rgba(0,0,0,.18);
}
html{scroll-behavior:smooth}
body{font-family:'Noto Sans KR',sans-serif;background:#f0f4f8;color:var(--gray-800);min-height:100vh;font-size:14px;line-height:1.6}

/* â”€â”€ ëª¨ë‹¬ ì˜¤ë²„ë ˆì´ â”€â”€ */
.overlay{position:fixed;inset:0;background:rgba(13,27,42,.7);backdrop-filter:blur(6px);z-index:1000;display:flex;align-items:center;justify-content:center;padding:20px;animation:fadeIn .2s ease}
.overlay.hidden{display:none}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}

/* â”€â”€ API Key ëª¨ë‹¬ â”€â”€ */
.key-modal{
  background:#fff;border-radius:20px;max-width:480px;width:100%;
  box-shadow:var(--shadow-lg);animation:slideUp .25s ease;overflow:hidden;
}
@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
.key-modal-head{
  background:var(--navy);padding:28px 32px 24px;
  position:relative;overflow:hidden;
}
.key-modal-head::before{
  content:'';position:absolute;top:-40px;right:-40px;
  width:160px;height:160px;border-radius:50%;
  background:rgba(3,199,90,.12);
}
.key-modal-head .logo-mark{
  width:44px;height:44px;border-radius:12px;
  background:var(--green);display:flex;align-items:center;justify-content:center;
  font-size:22px;font-weight:900;color:#fff;letter-spacing:-1px;margin-bottom:16px;
  position:relative;
}
.key-modal-head h2{font-size:20px;font-weight:800;color:#fff;margin-bottom:6px}
.key-modal-head p{font-size:13px;color:rgba(255,255,255,.6);line-height:1.6}
.key-modal-body{padding:24px 32px}
.step-guide{margin-bottom:20px}
.step-guide-title{font-size:12px;font-weight:700;color:var(--gray-400);letter-spacing:.5px;text-transform:uppercase;margin-bottom:12px}
.step-row{display:flex;gap:10px;align-items:flex-start;margin-bottom:10px}
.step-num{
  width:22px;height:22px;border-radius:50%;
  background:var(--green-pale);border:1.5px solid var(--green);
  color:var(--green);font-size:11px;font-weight:800;
  display:flex;align-items:center;justify-content:center;flex-shrink:0;margin-top:1px;
}
.step-text{font-size:13px;color:var(--gray-600);line-height:1.6}
.step-text a{color:var(--blue);text-decoration:none;font-weight:600}
.step-text a:hover{text-decoration:underline}
.key-input-wrap{
  background:var(--gray-50);border:2px solid var(--gray-200);
  border-radius:12px;padding:14px 16px;margin-bottom:8px;
  display:flex;align-items:center;gap:10px;
  transition:border-color .15s;
}
.key-input-wrap:focus-within{border-color:var(--green);background:#fff}
.key-input-wrap input{
  flex:1;border:none;background:none;outline:none;
  font-family:inherit;font-size:13px;color:var(--gray-800);
  letter-spacing:.5px;
}
.key-input-wrap input::placeholder{color:#bbb;letter-spacing:0}
.key-toggle-btn{background:none;border:none;cursor:pointer;font-size:16px;color:var(--gray-400);padding:2px}
.key-notice{font-size:11px;color:var(--gray-400);margin-bottom:20px;line-height:1.6}
.key-notice span{color:var(--green);font-weight:600}
.key-confirm-btn{
  width:100%;padding:14px;background:var(--green);color:#fff;
  border:none;border-radius:10px;font-size:14px;font-weight:700;
  font-family:inherit;cursor:pointer;transition:background .15s;
}
.key-confirm-btn:hover{background:var(--green-dark)}
.key-confirm-btn:disabled{background:var(--gray-400);cursor:not-allowed}
/* ëª¨ë‹¬ íƒ­ */
.modal-tabs{display:flex;border-bottom:1px solid var(--gray-200);margin-bottom:20px}
.modal-tab{
  flex:1;padding:10px;font-size:13px;font-weight:600;
  background:none;border:none;cursor:pointer;font-family:inherit;
  color:var(--gray-400);border-bottom:2px solid transparent;margin-bottom:-1px;
  transition:all .15s;
}
.modal-tab.active{color:var(--green);border-bottom-color:var(--green)}
.tab-pane{display:none}.tab-pane.active{display:block}
.naver-key-row{display:flex;gap:8px;margin-bottom:8px}
.naver-key-row .key-input-wrap{flex:1;margin-bottom:0;padding:10px 12px}
.naver-key-row .key-input-wrap input{font-size:12px}
.naver-key-lbl{font-size:11px;font-weight:600;color:var(--gray-600);margin-bottom:5px;display:block}
.naver-status{
  display:flex;align-items:center;gap:6px;
  font-size:12px;padding:8px 10px;border-radius:7px;margin-top:4px;
}
.naver-status.ok{background:rgba(3,199,90,.08);color:#1a6e37;border:1px solid rgba(3,199,90,.2)}
.naver-status.none{background:var(--gray-50);color:var(--gray-400);border:1px solid var(--gray-200)}

/* â”€â”€ í—¤ë” â”€â”€ */
.site-header{
  background:var(--navy);
  padding:0 24px;height:56px;
  display:flex;align-items:center;justify-content:space-between;
  position:sticky;top:0;z-index:100;
  box-shadow:0 2px 12px rgba(0,0,0,.2);
}
.header-left{display:flex;align-items:center;gap:10px}
.h-logo{
  width:32px;height:32px;background:var(--green);border-radius:9px;
  display:flex;align-items:center;justify-content:center;
  font-size:16px;font-weight:900;color:#fff;letter-spacing:-1px;
}
.h-title{font-size:15px;font-weight:700;color:#fff}
.h-sub{font-size:11px;color:rgba(255,255,255,.4);margin-left:2px}
.h-key-btn{
  display:flex;align-items:center;gap:6px;
  background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15);
  border-radius:7px;padding:6px 12px;
  color:rgba(255,255,255,.7);font-size:12px;font-weight:500;
  cursor:pointer;font-family:inherit;transition:all .15s;
}
.h-key-btn:hover{background:rgba(255,255,255,.14);color:#fff}
.key-status-item{display:flex;align-items:center;gap:5px}
.key-status-sep{color:rgba(255,255,255,.2);font-size:12px;margin:0 4px}
.status-dot{width:8px;height:8px;border-radius:50%;background:var(--red);flex-shrink:0;box-shadow:0 0 4px rgba(0,0,0,.3)}
.status-dot.ok{background:var(--green);box-shadow:0 0 6px rgba(3,199,90,.5)}
.status-lbl{font-size:11px;color:rgba(255,255,255,.6)}
.key-edit-lbl{font-size:11px;color:rgba(255,255,255,.4);margin-left:6px;border-left:1px solid rgba(255,255,255,.15);padding-left:8px}

/* â”€â”€ íˆì–´ë¡œ ë°°ë„ˆ â”€â”€ */
.hero{
  background:linear-gradient(135deg,var(--navy) 0%,var(--navy2) 100%);
  padding:40px 24px;text-align:center;position:relative;overflow:hidden;
}
.hero::before{
  content:'';position:absolute;top:-80px;left:50%;transform:translateX(-50%);
  width:600px;height:300px;border-radius:50%;
  background:radial-gradient(ellipse,rgba(3,199,90,.12) 0%,transparent 70%);
  pointer-events:none;
}
.hero h2{font-size:26px;font-weight:800;color:#fff;margin-bottom:10px;line-height:1.3;position:relative}
.hero h2 em{color:var(--green);font-style:normal}
.hero p{font-size:14px;color:rgba(255,255,255,.55);max-width:480px;margin:0 auto 24px;line-height:1.7;position:relative}
.hero-chips{display:flex;flex-wrap:wrap;justify-content:center;gap:8px;position:relative}
.chip{
  background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.12);
  border-radius:20px;padding:5px 12px;
  font-size:12px;color:rgba(255,255,255,.65);
}
.chip b{color:var(--green)}

/* â”€â”€ ë ˆì´ì•„ì›ƒ â”€â”€ */
.main{display:grid;grid-template-columns:340px 1fr 290px;gap:14px;max-width:1360px;margin:0 auto;padding:18px 16px}

/* â”€â”€ ì¹´ë“œ ê³µí†µ â”€â”€ */
.card{background:#fff;border-radius:14px;border:1px solid var(--gray-200);box-shadow:var(--shadow-sm)}
.card-head{padding:14px 18px;border-bottom:1px solid var(--gray-100);display:flex;align-items:center;gap:8px}
.card-head h3{font-size:13px;font-weight:700;flex:1;color:var(--gray-800)}
.card-body{padding:18px}

/* â”€â”€ ì…ë ¥ í¼ â”€â”€ */
.field{margin-bottom:14px}
.field:last-child{margin-bottom:0}
.lbl{display:block;font-size:11px;font-weight:700;color:var(--gray-600);margin-bottom:5px;letter-spacing:.4px;text-transform:uppercase}
.req{color:var(--red);margin-left:2px}
.inp{
  width:100%;padding:9px 12px;
  border:1.5px solid var(--gray-200);border-radius:9px;
  font-size:13px;font-family:inherit;outline:none;
  transition:border-color .15s,box-shadow .15s;background:#fff;color:var(--gray-800);
}
.inp:focus{border-color:var(--green);box-shadow:0 0 0 3px rgba(3,199,90,.1)}
.inp::placeholder{color:#c8d0da}
textarea.inp{resize:vertical;line-height:1.6;min-height:70px}

/* URL í–‰ */
.url-row{display:flex;gap:7px}
.url-row .inp{flex:1;min-width:0}
.url-btn{
  flex-shrink:0;padding:9px 13px;
  background:var(--gray-100);border:1.5px solid var(--gray-200);
  border-radius:9px;font-size:12px;font-weight:700;
  cursor:pointer;font-family:inherit;color:var(--gray-600);
  transition:all .15s;white-space:nowrap;
}
.url-btn:hover{background:var(--gray-200)}
.url-btn:disabled{opacity:.5;cursor:not-allowed}
.url-clear{background:rgba(229,62,62,.08);border-color:rgba(229,62,62,.2);color:var(--red);padding:9px 11px;font-size:13px;font-weight:700}
.url-clear:hover{background:rgba(229,62,62,.15);border-color:var(--red)}
.url-btn.loading{color:var(--blue)}

/* ìƒí’ˆ ì¹´ë“œ (URL ë¶ˆëŸ¬ì˜¨ í›„) */
.product-card{
  display:flex;gap:10px;align-items:flex-start;
  background:var(--green-pale);border:1px solid rgba(3,199,90,.2);
  border-radius:9px;padding:10px 12px;margin-bottom:14px;
  animation:fadeIn .3s ease;
}
.product-card img{width:48px;height:48px;object-fit:cover;border-radius:6px;border:1px solid rgba(0,0,0,.08);flex-shrink:0}
.p-name{font-size:12px;font-weight:700;line-height:1.4;margin-bottom:2px;color:var(--gray-800)}
.p-desc{font-size:11px;color:var(--gray-600);line-height:1.5;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}

/* ì´ë¯¸ì§€ ì—…ë¡œë“œ */
.upload-zone{
  border:2px dashed var(--gray-200);border-radius:9px;
  padding:14px;text-align:center;cursor:pointer;
  transition:all .2s;position:relative;
}
.upload-zone:hover,.upload-zone.drag{border-color:var(--green);background:var(--green-pale)}
.upload-zone.filled{border-color:var(--green);background:var(--green-pale)}
.upload-zone input{position:absolute;inset:0;opacity:0;cursor:pointer;width:100%;height:100%}
.upl-icon{font-size:20px;margin-bottom:3px}
.upl-text{font-size:12px;color:var(--gray-400)}
.upl-count{font-size:11px;color:var(--green);font-weight:700;margin-top:3px}
/* ì´ë¯¸ì§€ ì¸ë„¤ì¼ ê·¸ë¦¬ë“œ */
.img-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:6px;margin-top:10px}
.img-thumb{
  position:relative;border-radius:7px;overflow:hidden;
  aspect-ratio:1;border:1px solid var(--gray-200);
  background:var(--gray-50);
}
.img-thumb img{width:100%;height:100%;object-fit:cover;display:block}
.img-thumb .del-btn{
  position:absolute;top:3px;right:3px;
  width:18px;height:18px;border-radius:50%;
  background:rgba(0,0,0,.55);color:#fff;
  border:none;cursor:pointer;font-size:11px;
  display:flex;align-items:center;justify-content:center;
  line-height:1;opacity:0;transition:opacity .15s;
}
.img-thumb:hover .del-btn{opacity:1}
.img-thumb .img-num{
  position:absolute;bottom:3px;left:4px;
  font-size:9px;font-weight:700;color:#fff;
  background:rgba(0,0,0,.45);border-radius:3px;padding:1px 4px;
}

/* ì•Œë¦¼ ë°•ìŠ¤ */
.notice{border-radius:8px;padding:9px 12px;font-size:12px;line-height:1.6;margin-bottom:14px}
.n-ok{background:rgba(3,199,90,.08);color:#1a6e37;border:1px solid rgba(3,199,90,.2)}
.n-warn{background:rgba(245,158,11,.08);color:#92400e;border:1px solid rgba(245,158,11,.2)}
.n-info{background:rgba(26,115,232,.08);color:#1a5276;border:1px solid rgba(26,115,232,.2)}

/* ìƒì„± ë²„íŠ¼ */
.gen-btn{
  width:100%;padding:13px;
  background:var(--green);color:#fff;border:none;border-radius:10px;
  font-size:14px;font-weight:800;font-family:inherit;
  cursor:pointer;transition:all .15s;
  display:flex;align-items:center;justify-content:center;gap:8px;
  box-shadow:0 4px 14px rgba(3,199,90,.3);
}
.gen-btn:hover{background:var(--green-dark);box-shadow:0 6px 18px rgba(3,199,90,.35);transform:translateY(-1px)}
.gen-btn:active{transform:translateY(0)}
.gen-btn:disabled{background:var(--gray-400);box-shadow:none;transform:none;cursor:not-allowed}

/* ì§„í–‰ ë‹¨ê³„ */
.progress{margin-top:16px;display:none}
.p-item{
  display:flex;align-items:center;gap:9px;
  padding:8px 0;font-size:12px;color:var(--gray-400);
  border-bottom:1px solid var(--gray-100);
}
.p-item:last-child{border:none}
.p-dot{
  width:24px;height:24px;border-radius:50%;flex-shrink:0;
  background:var(--gray-100);color:var(--gray-400);
  display:flex;align-items:center;justify-content:center;
  font-size:11px;font-weight:700;transition:all .3s;
}
.p-item.active{color:var(--blue)}
.p-item.active .p-dot{background:var(--blue);color:#fff;animation:pulse 1s infinite}
.p-item.done{color:var(--green)}
.p-item.done .p-dot{background:var(--green);color:#fff}
@keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba(26,115,232,.4)}50%{box-shadow:0 0 0 6px rgba(26,115,232,0)}}

/* â”€â”€ ê²°ê³¼ íŒ¨ë„ â”€â”€ */
.sec-bar{
  display:flex;align-items:center;justify-content:space-between;
  padding:13px 18px;border-bottom:1px solid var(--gray-100);
}
.sec-title{font-size:13px;font-weight:700;display:flex;align-items:center;gap:7px}
.badge{
  display:inline-flex;align-items:center;
  background:var(--gray-100);border-radius:20px;
  padding:2px 9px;font-size:11px;font-weight:600;color:var(--gray-600);
}
.badge.sel{background:rgba(3,199,90,.12);color:#1a6e37}
.all-btn{font-size:12px;color:var(--blue);background:none;border:none;cursor:pointer;font-weight:600;font-family:inherit}
.all-btn:hover{text-decoration:underline}

/* ì†Œì¬ ì•„ì´í…œ */
.items{padding:4px 0}
.item{
  display:flex;align-items:center;gap:9px;
  padding:9px 18px;
  border-bottom:1px solid var(--gray-50);
  transition:background .1s;
}
.item:last-child{border:none}
.item:hover{background:var(--gray-50)}
.item.on{background:rgba(3,199,90,.04)}

.plus{
  width:26px;height:26px;border-radius:7px;
  border:2px solid var(--gray-200);background:#fff;
  color:var(--gray-400);font-size:16px;font-weight:700;
  cursor:pointer;display:flex;align-items:center;justify-content:center;
  flex-shrink:0;transition:all .15s;font-family:inherit;line-height:1;
}
.plus:hover{border-color:var(--green);color:var(--green)}
.item.on .plus{background:var(--green);border-color:var(--green);color:#fff}

.txt-wrap{flex:1;min-width:0}
.txt{font-size:13px;color:var(--gray-800);line-height:1.5;word-break:break-all}
.meta{display:flex;align-items:center;gap:6px;margin-top:2px;flex-wrap:wrap}
.cc{font-size:11px;color:var(--gray-400)}
.cc.over{color:var(--red);font-weight:700}
.gtag{display:inline-block;padding:1px 6px;border-radius:4px;font-size:10px;font-weight:700}
.g1{background:#e8f4fd;color:#1565c0}
.g2{background:#f3e8ff;color:#6a1b9a}
.g3{background:#fff3e0;color:#e65100}
.g4{background:#e8f5e9;color:#2e7d32}

.kw-in{
  width:80px;font-size:11px;padding:4px 7px;
  border:1px solid var(--gray-200);border-radius:5px;
  background:var(--gray-50);color:var(--gray-600);
  font-family:inherit;outline:none;transition:border-color .15s;flex-shrink:0;
}
.kw-in:focus{border-color:var(--green)}
.kw-in::placeholder{color:#ccc}

.divider{height:6px;background:var(--gray-100);border-top:1px solid var(--gray-200);border-bottom:1px solid var(--gray-200)}

/* ë¹ˆ ìƒíƒœ */
.empty{
  display:flex;flex-direction:column;align-items:center;
  justify-content:center;padding:70px 24px;
  color:var(--gray-400);text-align:center;
}
.empty-icon{font-size:48px;margin-bottom:14px;opacity:.3}
.empty-txt{font-size:13px;line-height:1.9}
.empty-txt strong{color:var(--gray-600)}

/* í‚¤ì›Œë“œ */
.kw-cloud{padding:14px 18px;display:flex;flex-wrap:wrap;gap:7px}
.kw-chip{
  background:var(--gray-100);border:1.5px solid var(--gray-200);
  border-radius:20px;padding:5px 12px;
  font-size:12px;color:var(--gray-600);cursor:pointer;
  transition:all .15s;user-select:none;
}
.kw-chip:hover{background:var(--green-pale);border-color:var(--green);color:var(--green-dark)}
.kw-chip.copied{background:var(--green-pale);border-color:var(--green);color:var(--green-dark)}

/* â”€â”€ ë¯¸ë¦¬ë³´ê¸° íŒ¨ë„ â”€â”€ */
.preview-panel{position:sticky;top:74px;height:fit-content}
.pv-box{margin:14px 16px;border:1px solid var(--gray-200);border-radius:10px;overflow:hidden;box-shadow:var(--shadow-sm)}
.pv-lbl{font-size:10px;font-weight:700;color:var(--gray-400);background:var(--gray-50);padding:6px 12px;border-bottom:1px solid var(--gray-200);letter-spacing:.5px;text-transform:uppercase}
.pv-ad{padding:12px 14px}
.pv-url{color:var(--gray-400);font-size:11px;margin-bottom:4px;display:flex;align-items:center;gap:4px}
.pv-title{font-size:14px;font-weight:700;margin-bottom:5px;line-height:1.4;word-break:break-all}
.pv-desc{font-size:12px;line-height:1.6;word-break:break-all}

/* ì„ íƒ ëª©ë¡ */
.sel-wrap{padding:14px 16px;border-top:1px solid var(--gray-100)}
.sel-head{font-size:10px;font-weight:700;color:var(--gray-400);letter-spacing:.5px;text-transform:uppercase;margin-bottom:8px;display:flex;justify-content:space-between;align-items:center}
.sel-cnt{color:var(--green)}
.sel-item{
  background:var(--gray-50);border:1px solid var(--gray-200);
  border-radius:7px;padding:7px 28px 7px 10px;margin-bottom:5px;
  font-size:12px;color:var(--gray-700);line-height:1.5;position:relative;
}
.sel-x{position:absolute;top:6px;right:7px;background:none;border:none;cursor:pointer;color:var(--gray-400);font-size:15px;line-height:1}
.sel-x:hover{color:var(--red)}
.sel-empty{font-size:12px;color:#c8d0da;text-align:center;padding:8px 0}

.export-btn{
  margin:10px 16px 16px;width:calc(100% - 32px);
  padding:11px;background:var(--navy);color:#fff;
  border:none;border-radius:9px;font-size:13px;font-weight:700;
  cursor:pointer;font-family:inherit;transition:all .15s;
  display:flex;align-items:center;justify-content:center;gap:6px;
}
.export-btn:hover{background:#000}
.export-btn:disabled{background:var(--gray-400);cursor:not-allowed}

/* ìŠ¤í”¼ë„ˆ */
.spin{width:14px;height:14px;border:2px solid rgba(255,255,255,.4);border-top-color:#fff;border-radius:50%;animation:_spin .6s linear infinite;display:inline-block;flex-shrink:0}
@keyframes _spin{to{transform:rotate(360deg)}}
.spin-sm{width:12px;height:12px;border-width:2px;border-color:rgba(26,115,232,.3);border-top-color:var(--blue);border-radius:50%;animation:_spin .6s linear infinite;display:inline-block}


/* ë¹„ìš© ì•ˆë‚´ */
.cost-info{margin-top:10px;background:var(--gray-50);border:1px solid var(--gray-200);border-radius:9px;padding:10px 12px;font-size:12px}
.cost-tip{color:var(--gray-700);margin-bottom:8px;line-height:1.5}
.cost-tip b{color:var(--green-dark)}
.cost-row{display:grid;grid-template-columns:1fr auto 1fr auto;gap:4px 10px;margin-bottom:8px;padding-bottom:8px;border-bottom:1px solid var(--gray-200)}
.cost-label{color:var(--gray-400);font-size:11px;align-self:center}
.cost-val{color:var(--gray-700);font-size:11px;font-weight:600;text-align:right;align-self:center}
.cost-current{
  background:#fff;border:1px solid var(--green);border-radius:6px;
  padding:6px 10px;color:var(--gray-700);text-align:center;
  animation:fadeIn .2s ease;
}
.cost-current b{color:var(--green-dark)}
.cost-current .c-over{color:var(--orange)}


/* í•µì‹¬ íŠ¹ì§• ìŠ¬ë¡¯ */
.feat-suggest{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:10px}
.feat-chip{
  background:rgba(3,199,90,.08);border:1.5px solid rgba(3,199,90,.25);
  border-radius:20px;padding:5px 11px;font-size:12px;color:#1a6e37;
  cursor:pointer;transition:all .15s;user-select:none;display:flex;align-items:center;gap:5px;
}
.feat-chip:hover{background:rgba(3,199,90,.15);border-color:var(--green)}
.feat-chip.used{background:var(--gray-100);border-color:var(--gray-200);color:var(--gray-400);cursor:default}
.feat-chip .chip-plus{font-size:14px;font-weight:700;color:var(--green)}
.feat-chip.used .chip-plus{color:var(--gray-400)}
.feat-suggest-lbl{font-size:11px;color:var(--gray-400);margin-bottom:6px;display:flex;align-items:center;gap:5px}
.feat-suggest-lbl .spin-sm{flex-shrink:0}
.feat-slots{display:flex;flex-direction:column;gap:6px}
.feat-slot{
  display:flex;align-items:center;gap:7px;
  background:var(--gray-50);border:1.5px solid var(--gray-200);
  border-radius:8px;padding:7px 10px;transition:border-color .15s;
}
.feat-slot:focus-within{border-color:var(--green);background:#fff}
.feat-slot-num{font-size:11px;font-weight:700;color:var(--gray-400);width:16px;flex-shrink:0;text-align:center}
.feat-slot input{
  flex:1;border:none;background:none;outline:none;
  font-size:13px;font-family:inherit;color:var(--gray-800);
}
.feat-slot input::placeholder{color:#c8d0da}
.feat-slot-del{
  background:none;border:none;cursor:pointer;
  color:var(--gray-300);font-size:14px;line-height:1;padding:2px;
  transition:color .15s;
}
.feat-slot-del:hover{color:var(--red)}


/* ë°˜ì‘í˜• ì†Œì¬ ì•ˆë‚´ */
.rotation-guide{
  margin:0 18px 12px;
  background:linear-gradient(135deg,rgba(26,115,232,.06),rgba(3,199,90,.06));
  border:1px solid rgba(26,115,232,.15);border-radius:9px;padding:11px 14px;
}
.rotation-title{font-size:12px;font-weight:700;color:var(--blue);margin-bottom:7px;display:flex;align-items:center;gap:5px}
.rotation-slots{display:flex;gap:6px;flex-wrap:wrap}
.rot-slot{
  flex:1;min-width:80px;
  background:#fff;border:1px solid var(--gray-200);border-radius:7px;
  padding:7px 10px;text-align:center;
}
.rot-slot-name{font-size:10px;font-weight:700;color:var(--gray-400);margin-bottom:3px;letter-spacing:.3px}
.rot-slot-desc{font-size:11px;color:var(--gray-600);line-height:1.5}
.rot-note{font-size:11px;color:var(--gray-400);margin-top:7px;line-height:1.6}
/* ê³ ì • ìœ„ì¹˜ ë“œë¡­ë‹¤ìš´ */
.pin-sel{
  font-size:11px;padding:3px 6px;
  border:1px solid var(--gray-200);border-radius:5px;
  background:var(--gray-50);color:var(--gray-600);
  font-family:inherit;outline:none;cursor:pointer;
  transition:border-color .15s;flex-shrink:0;
}
.pin-sel:focus{border-color:var(--green)}
.pin-sel.pinned{background:rgba(26,115,232,.08);border-color:rgba(26,115,232,.3);color:var(--blue);font-weight:600}

/* ë°˜ì‘í˜• */
@media(max-width:1100px){.main{grid-template-columns:320px 1fr}.preview-panel{display:none}}
@media(max-width:720px){.main{grid-template-columns:1fr}.hero h2{font-size:20px}}

/* ìŠ¤í¬ë¡¤ë°” */
::-webkit-scrollbar{width:4px}::-webkit-scrollbar-thumb{background:var(--gray-200);border-radius:2px}
</style>
</head>
<body>

<!-- â”€â”€ API Key ëª¨ë‹¬ â”€â”€ -->
<div class="overlay" id="keyModal">
  <div class="key-modal">
    <div class="key-modal-head">
      <div class="logo-mark">N</div>
      <h2>íŒŒì›Œë§í¬ ê´‘ê³  ì†Œì¬ ìƒì„±ê¸°</h2>
      <p>ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´ URL í•˜ë‚˜ë¡œ íŒŒì›Œë§í¬ ê´‘ê³  ë¬¸êµ¬ë¥¼<br>AIê°€ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ë“œë¦½ë‹ˆë‹¤</p>
    </div>
    <div class="key-modal-body">

      <!-- Gemini íƒ­ -->
      <div class="tab-pane active" id="tab-claude">
        <div class="step-guide">
          <div class="step-guide-title">Google Gemini API Key ë°œê¸‰ (ë¬´ë£Œ)</div>
          <div class="step-row">
            <div class="step-num">1</div>
            <div class="step-text"><a href="https://aistudio.google.com/app/apikey" target="_blank">aistudio.google.com</a> ì ‘ì† (êµ¬ê¸€ ê³„ì • ë¡œê·¸ì¸)</div>
          </div>
          <div class="step-row">
            <div class="step-num">2</div>
            <div class="step-text"><b>Create API Key</b> í´ë¦­ â†’ í”„ë¡œì íŠ¸ ì„ íƒ í›„ ìƒì„±</div>
          </div>
          <div class="step-row">
            <div class="step-num">3</div>
            <div class="step-text">ìƒì„±ëœ <b>AIza...</b> í˜•íƒœì˜ í‚¤ë¥¼ ë³µì‚¬í•´ì„œ ì•„ë˜ì— ë¶™ì—¬ë„£ê¸°</div>
          </div>
        </div>
        <div class="key-input-wrap">
          <input type="password" id="modalKey" placeholder="AIzaSy..." oninput="onKeyInput()" />
          <button class="key-toggle-btn" onclick="toggleModalKey()">ğŸ‘</button>
        </div>
        <div class="key-notice">
          ğŸ”’ API KeyëŠ” <span>ë¸Œë¼ìš°ì €ì—ë§Œ ì €ì¥</span>ë˜ë©° ì„œë²„ë¡œ ì „ì†¡ë˜ì§€ ì•Šì•„ìš”.<br>
          ğŸ’š Gemini 1.5 Flash ê¸°ì¤€ <span>í•˜ë£¨ 1,500íšŒ ì™„ì „ ë¬´ë£Œ</span>ì…ë‹ˆë‹¤
        </div>
      </div>

      <button class="key-confirm<button class="key-confirm-btn" id="keyConfirmBtn" onclick="confirmKey()" disabled>
        ì €ì¥í•˜ê³  ì‹œì‘í•˜ê¸° â†’
      </button>
    </div>
  </div>
</div>

<!-- â”€â”€ í—¤ë” â”€â”€ -->
<header class="site-header">
  <div class="header-left">
    <div class="h-logo">N</div>
    <span class="h-title">íŒŒì›Œë§í¬ ê´‘ê³  ì†Œì¬ ìƒì„±ê¸°</span>
    <span class="h-sub">Gemini AI powered</span>
  </div>
  <button class="h-key-btn" onclick="openKeyModal()">
    <span class="key-status-item">
      <span class="status-dot" id="claudeDot"></span>
      <span class="status-lbl">Gemini</span>
    </span>
    <span class="key-status-item">
      <span class="status-dot" id="naverDot"></span>
      <span class="status-lbl">ë„¤ì´ë²„</span>
    </span>
    <span class="key-edit-lbl">âš™ í‚¤ ì„¤ì •</span>
  </button>
</header>

<!-- â”€â”€ íˆì–´ë¡œ â”€â”€ -->
<div class="hero">
  <h2>ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´ URL í•˜ë‚˜ë¡œ<br><em>íŒŒì›Œë§í¬ ê´‘ê³  ì†Œì¬</em> ìë™ ì™„ì„±</h2>
  <p>AIê°€ ìƒí’ˆì„ ë¶„ì„í•´ì„œ ì œëª©Â·ì„¤ëª…Â·í‚¤ì›Œë“œë¥¼ ìˆœì‹ê°„ì— ë§Œë“¤ì–´ë“œë ¤ìš”.<br>ì§ì ‘ ê³ ë¥´ê³  ì„ íƒí•´ì„œ ë°”ë¡œ ë“±ë¡í•˜ì„¸ìš”.</p>
  <div class="hero-chips">
    <span class="chip">ì œëª© <b>15ê°œ</b></span>
    <span class="chip">ì„¤ëª… <b>4ê°œ</b></span>
    <span class="chip">ì¶”ì²œ í‚¤ì›Œë“œ <b>20ê°œ</b></span>
    <span class="chip">ê¸€ììˆ˜ ìë™ ì²´í¬</span>
    <span class="chip">CSV ë‚´ë³´ë‚´ê¸°</span>
  </div>
</div>

<!-- â”€â”€ ë©”ì¸ â”€â”€ -->
<div class="main">

  <!-- ì™¼ìª½: ì…ë ¥ -->
  <div>
    <div class="card">
      <div class="card-head"><h3>ğŸ“¦ ìƒí’ˆ ì •ë³´ ì…ë ¥</h3></div>
      <div class="card-body">



        <div class="field">
          <label class="lbl">ìƒí’ˆëª… <span class="req">*</span></label>
          <input type="text" class="inp" id="productName" placeholder="ì˜ˆ: ì•„ë¡œë§ˆ ë””í“¨ì € 200ml ìš°ë“œí–¥" />
        </div>

        <div class="field">
          <label class="lbl">í•µì‹¬ íŠ¹ì§• Â· ê°•ì  <span style="color:var(--gray-400);font-weight:400;font-size:10px">(ìµœëŒ€ 5ê°œ)</span></label>
          <div id="featSuggestWrap" style="display:none">
            <div class="feat-suggest-lbl" id="featSuggestLbl">ğŸ’¡ AI ì¶”ì²œ íŠ¹ì§• (í´ë¦­í•˜ë©´ ì¶”ê°€)</div>
            <div class="feat-suggest" id="featSuggest"></div>
          </div>
          <div class="feat-slots" id="featSlots">
            <div class="feat-slot"><span class="feat-slot-num">1</span><input type="text" placeholder="ì˜ˆ: ì²œì—° ì—ì„¼ì…œì˜¤ì¼ 100% ì‚¬ìš©" /><button class="feat-slot-del" onclick="clearSlot(this)">âœ•</button></div>
            <div class="feat-slot"><span class="feat-slot-num">2</span><input type="text" placeholder="ì˜ˆ: ìµœëŒ€ 12ì‹œê°„ ì€ì€í•˜ê²Œ ì§€ì†" /><button class="feat-slot-del" onclick="clearSlot(this)">âœ•</button></div>
            <div class="feat-slot"><span class="feat-slot-num">3</span><input type="text" placeholder="ì˜ˆ: ì†ŒìŒ ì—†ëŠ” ì´ˆìŒíŒŒ ë°©ì‹" /><button class="feat-slot-del" onclick="clearSlot(this)">âœ•</button></div>
            <div class="feat-slot"><span class="feat-slot-num">4</span><input type="text" placeholder="ì˜ˆ: ì¸í…Œë¦¬ì–´ ê°ì„± ìš°ë“œ ë””ìì¸" /><button class="feat-slot-del" onclick="clearSlot(this)">âœ•</button></div>
            <div class="feat-slot"><span class="feat-slot-num">5</span><input type="text" placeholder="ì˜ˆ: 500ml ë¦¬í•„ ì˜¤ì¼ ì¦ì •" /><button class="feat-slot-del" onclick="clearSlot(this)">âœ•</button></div>
          </div>
        </div>

        <div class="field">
          <label class="lbl">íƒ€ê²Ÿ ê³ ê°</label>
          <input type="text" class="inp" id="target" placeholder="ì˜ˆ: í™ˆì¸í…Œë¦¬ì–´, ì„ ë¬¼ìš©, ê³µê°„ í–¥ê¸° ê´€ì‹¬ ê³ ê°" />
        </div>

        <div class="field">
          <label class="lbl">ìƒì„¸í˜ì´ì§€ ì´ë¯¸ì§€ <span style="color:var(--gray-400);font-weight:400;font-size:10px">(ìµœëŒ€ 20ì¥ Â· AIê°€ ëª¨ë‘ ë¶„ì„)</span></label>
          <div class="upload-zone" id="uploadZone">
            <input type="file" id="fileInput" accept="image/*" multiple onchange="onFile(event)" />
            <div class="upl-icon">ğŸ–¼ï¸</div>
            <div class="upl-text">ì´ë¯¸ì§€ ë“œë˜ê·¸ ë˜ëŠ” í´ë¦­ (ì—¬ëŸ¬ ì¥ ë™ì‹œ ì„ íƒ ê°€ëŠ¥)</div>
            <div class="upl-count" id="uplCount" style="display:none"></div>
          </div>
          <div class="img-grid" id="imgGrid"></div>
          <div class="cost-info" id="costInfo">
            <div class="cost-tip">ğŸ’¡ GeminiëŠ” ë¬´ë£Œì˜ˆìš”! ë‹¨, ì´ë¯¸ì§€ê°€ ë§ì„ìˆ˜ë¡ <b>ì†ë„ê°€ ëŠë ¤ì§ˆ ìˆ˜</b> ìˆì–´ìš”</div>
            <div class="cost-row">
              <span class="cost-label">ì´ë¯¸ì§€ ì—†ìŒ</span><span class="cost-val">~3ì´ˆ</span>
              <span class="cost-label">5ì¥</span><span class="cost-val">~10ì´ˆ</span>
              <span class="cost-label">10ì¥</span><span class="cost-val">~20ì´ˆ</span>
              <span class="cost-label">20ì¥</span><span class="cost-val">~40ì´ˆ</span>
            </div>
            <div class="cost-current" id="costCurrent" style="display:none">
              í˜„ì¬ <b id="costImgCnt">0</b>ì¥ ì„ íƒ â†’ ì˜ˆìƒ ì†Œìš”ì‹œê°„ <b id="costAmt">-</b>
            </div>
          </div>
        </div>

        <button class="gen-btn" id="genBtn" onclick="generate()">
          <span id="genTxt">âœ¨ ê´‘ê³  ì†Œì¬ ìƒì„±í•˜ê¸°</span>
        </button>

        <div class="progress" id="progress">
          <div class="p-item" id="pg1">
            <div class="p-dot" id="pd1">1</div>
            <span>ìƒí’ˆ ë¶„ì„ ì¤‘...</span>
          </div>
          <div class="p-item" id="pg2">
            <div class="p-dot" id="pd2">2</div>
            <span>ê´‘ê³  ì†Œì¬ 15ê°œ + 4ê°œ ì‘ì„±</span>
          </div>
          <div class="p-item" id="pg3">
            <div class="p-dot" id="pd3">3</div>
            <span>ì¶”ì²œ í‚¤ì›Œë“œ ì¶”ì¶œ</span>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- ì¤‘ì•™: ê²°ê³¼ -->
  <div>
    <div class="card">

      <div id="emptyState" class="empty">
        <div class="empty-icon">ğŸ“‹</div>
        <div class="empty-txt">
          URLì„ ë¶ˆëŸ¬ì˜¤ê±°ë‚˜ ìƒí’ˆ ì •ë³´ë¥¼ ì…ë ¥í•˜ê³ <br>
          <strong>ìƒì„± ë²„íŠ¼</strong>ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”<br><br>
          <span style="font-size:12px;color:#c8d0da">
            âœ“ ì œëª© 15ê°œ (15ì ì´ë‚´) &nbsp;Â·&nbsp; ì„¤ëª… 4ê°œ (45ì ì´ë‚´)<br>
            âœ“ ì¶”ì²œ í‚¤ì›Œë“œ 20ê°œ &nbsp;Â·&nbsp; CSV ë‚´ë³´ë‚´ê¸°
          </span>
        </div>
      </div>

      <div id="resultWrap" style="display:none">

        <!-- ì œëª© -->
        <div class="sec-bar">
          <div class="sec-title">
            ê´‘ê³  ì œëª©
            <span style="font-size:10px;color:var(--gray-400);font-weight:400">15ì ì´ë‚´</span>
            <span class="badge" id="tBadge">0</span>
            <span class="badge sel" id="tSelBadge" style="display:none"></span>
          </div>
          <button class="all-btn" onclick="selAll('t')">+ ì „ì²´ ì„ íƒ</button>
        </div>
        <div class="rotation-guide">
          <div class="rotation-title">ğŸ”„ ë°˜ì‘í˜• ì†Œì¬ â€” ì œëª©1Â·2Â·3 ë¡œí…Œì´ì…˜ ë…¸ì¶œ</div>
          <div class="rotation-slots">
            <div class="rot-slot">
              <div class="rot-slot-name">ì œëª© 1</div>
              <div class="rot-slot-desc">í•µì‹¬ í‚¤ì›Œë“œ<br>í¬í•¨ í•„ìˆ˜</div>
            </div>
            <div class="rot-slot">
              <div class="rot-slot-name">ì œëª© 2</div>
              <div class="rot-slot-desc">í˜œíƒÂ·ìˆ«ì<br>ê°•ì¡°</div>
            </div>
            <div class="rot-slot">
              <div class="rot-slot-name">ì œëª© 3</div>
              <div class="rot-slot-desc">íƒ€ê²ŸÂ·ê°ì„±<br>ë¬¸êµ¬</div>
            </div>
          </div>
          <div class="rot-note">ğŸ’¡ ê° ì†Œì¬ë¥¼ <b>ê³ ì • ìœ„ì¹˜</b>ì— ë°°ì •í•˜ë©´ A/B í…ŒìŠ¤íŠ¸ ì—†ì´ ì•ˆì •ì ìœ¼ë¡œ ìš´ì˜í•  ìˆ˜ ìˆì–´ìš”.<br>ì˜¤ë¥¸ìª½ ë“œë¡­ë‹¤ìš´ìœ¼ë¡œ ì œëª©1Â·2Â·3 ì¤‘ ê³ ì •í•  ìœ„ì¹˜ë¥¼ ì„ íƒí•˜ì„¸ìš”.</div>
        </div>
        <div class="items" id="titleItems"></div>

        <div class="divider"></div>

        <!-- ì„¤ëª… -->
        <div class="sec-bar">
          <div class="sec-title">
            ê´‘ê³  ì„¤ëª…
            <span style="font-size:10px;color:var(--gray-400);font-weight:400">45ì ì´ë‚´</span>
            <span class="badge" id="dBadge">0</span>
            <span class="badge sel" id="dSelBadge" style="display:none"></span>
          </div>
          <button class="all-btn" onclick="selAll('d')">+ ì „ì²´ ì„ íƒ</button>
        </div>
        <div class="items" id="descItems"></div>

        <div class="divider"></div>

        <!-- í‚¤ì›Œë“œ -->
        <div class="sec-bar">
          <div class="sec-title">ğŸ”‘ ì¶”ì²œ í‚¤ì›Œë“œ</div>
          <span style="font-size:11px;color:var(--gray-400)">í´ë¦­í•˜ë©´ ë³µì‚¬</span>
        </div>
        <div class="kw-cloud" id="kwCloud"></div>

      </div>
    </div>
  </div>

  <!-- ì˜¤ë¥¸ìª½: ë¯¸ë¦¬ë³´ê¸° -->
  <div>
    <div class="card preview-panel">
      <div class="card-head"><h3>ğŸ‘ï¸ ê´‘ê³  ë¯¸ë¦¬ë³´ê¸°</h3></div>

      <div class="pv-box">
        <div class="pv-lbl">PC ì†Œì¬ ë¯¸ë¦¬ë³´ê¸°</div>
        <div class="pv-ad">
          <div class="pv-url">ğŸŒ smartstore.naver.com Â· <span style="color:var(--orange);font-size:10px;border:1px solid var(--orange);border-radius:3px;padding:0 3px">ê´‘ê³ </span></div>
          <div class="pv-title" id="pvTitle" style="color:#bbb;font-weight:400;font-size:13px">ì œëª©ì„ ì„ íƒí•˜ë©´ í‘œì‹œë©ë‹ˆë‹¤</div>
          <div class="pv-desc" id="pvDesc" style="color:#bbb;font-size:11px">ì„¤ëª…ì„ ì„ íƒí•˜ë©´ í‘œì‹œë©ë‹ˆë‹¤</div>
        </div>
      </div>

      <div class="sel-wrap">
        <div class="sel-head">ì„ íƒëœ ì œëª© <span class="sel-cnt" id="sTCnt">0ê°œ</span></div>
        <div id="sTList"><div class="sel-empty">ì„ íƒ ì—†ìŒ</div></div>
        <div class="sel-head" style="margin-top:12px">ì„ íƒëœ ì„¤ëª… <span class="sel-cnt" id="sDCnt">0ê°œ</span></div>
        <div id="sDList"><div class="sel-empty">ì„ íƒ ì—†ìŒ</div></div>
      </div>

      <button class="export-btn" id="exportBtn" onclick="exportCSV()" disabled>
        ğŸ“¥ CSV ë‚´ë³´ë‚´ê¸°
      </button>
    </div>
  </div>

</div>

<script>
// â”€â”€ ìƒíƒœ
const S = { titles:[], descs:[], kws:[], selT:new Set(), selD:new Set(), imgs:[] };

// â”€â”€ API Key ê´€ë¦¬
let API_KEY     = localStorage.getItem('claude_key') || '';


window.addEventListener('DOMContentLoaded', () => {
  if (API_KEY && API_KEY.length > 5) {
    document.getElementById('keyModal').classList.add('hidden');
    updateKeyHeader(true);
  } else {
    document.getElementById('keyModal').classList.remove('hidden');
  }
});


function updateConfirmBtn() {
  const ck = document.getElementById('modalKey').value.trim();
  document.getElementById('keyConfirmBtn').disabled = !(ck.startsWith('AIza') || ck.length > 10);
}

function onKeyInput() { updateConfirmBtn(); }


function toggleModalKey() {
  const el = document.getElementById('modalKey');
  el.type = el.type === 'password' ? 'text' : 'password';
}

function confirmKey() {
  const ck = document.getElementById('modalKey').value.trim();
  if (!ck || ck.length < 5) return;
  API_KEY = ck;
  localStorage.setItem('claude_key', ck);

  document.getElementById('keyModal').classList.add('hidden');
  updateKeyHeader(true);
}

function openKeyModal() {
  document.getElementById('modalKey').value = API_KEY || '';
  updateConfirmBtn();
  document.getElementById('keyModal').classList.remove('hidden');
}

function updateKeyHeader(ok) {
  document.getElementById('claudeDot').className = 'status-dot' + (ok ? ' ok' : '');
}

// â”€â”€ íŒŒì¼ ì—…ë¡œë“œ (ìµœëŒ€ 20ì¥)
const MAX_IMGS = 20;
function onFile(e) {
  const files = Array.from(e.target.files).slice(0, MAX_IMGS - S.imgs.length);
  if (!files.length) return;
  files.forEach(f => {
    const r = new FileReader();
    r.onload = ev => {
      const raw = ev.target.result;
      const b64 = raw.split(',')[1];
      const type = f.type || 'image/jpeg';
      S.imgs.push({ b64, type, name: f.name, url: raw });
      renderImgGrid();
    };
    r.readAsDataURL(f);
  });
  // input ì´ˆê¸°í™” (ê°™ì€ íŒŒì¼ ì¬ì„ íƒ ê°€ëŠ¥í•˜ê²Œ)
  e.target.value = '';
}
function updateCost() {
  const n = S.imgs.length;
  const el = document.getElementById('costCurrent');
  if (n === 0) { el.style.display='none'; return; }
  const secs = 3 + n * 2;
  const over = n > 10;
  el.style.display = 'block';
  document.getElementById('costImgCnt').textContent = n;
  document.getElementById('costAmt').innerHTML = `<span class="${over?'c-over':''}">ì•½ ${secs}ì´ˆ${over?' (ëŠë¦´ ìˆ˜ ìˆìŒ)':''}</span>`;
}

function removeImg(i) {
  S.imgs.splice(i, 1);
  renderImgGrid();
}
function renderImgGrid() {
  const grid = document.getElementById('imgGrid');
  const cnt  = document.getElementById('uplCount');
  const zone = document.getElementById('uploadZone');
  if (S.imgs.length === 0) {
    grid.innerHTML = '';
    cnt.style.display = 'none';
    zone.classList.remove('filled');
    updateCost();
    return;
  }
  zone.classList.add('filled');
  cnt.style.display = 'block';
  cnt.textContent = `âœ“ ${S.imgs.length}ì¥ ì„ íƒë¨ (ìµœëŒ€ ${MAX_IMGS}ì¥)`;
  updateCost();
  grid.innerHTML = S.imgs.map((img, i) => `
    <div class="img-thumb">
      <img src="${img.url}" alt="${img.name}" />
      <button class="del-btn" onclick="removeImg(${i})" title="ì‚­ì œ">Ã—</button>
      <span class="img-num">${i+1}</span>
    </div>`).join('');
}


});



// AI íŠ¹ì§• ì¶”ì²œ (3ê°œ ì œì•ˆ)
async function suggestFeatures(name, cat, price) {
  if (!API_KEY) return;
  const wrap = document.getElementById('featSuggestWrap');
  const lbl  = document.getElementById('featSuggestLbl');
  const box  = document.getElementById('featSuggest');
  wrap.style.display = 'block';
  lbl.innerHTML = 'ğŸ’¡ AI ì¶”ì²œ íŠ¹ì§• ë¶„ì„ ì¤‘... <span class="spin-sm"></span>';
  box.innerHTML = '';
  try {
    const raw = await callClaude(
      `ë‹¹ì‹ ì€ ë„¤ì´ë²„ íŒŒì›Œë§í¬ ê´‘ê³  ì „ë¬¸ê°€ì…ë‹ˆë‹¤.
ìƒí’ˆ ì •ë³´ë¥¼ ë³´ê³  ê´‘ê³ ì— ì¨ë¨¹ì„ í•µì‹¬ íŠ¹ì§•Â·ê°•ì  3ê°€ì§€ë¥¼ ë½‘ì•„ì£¼ì„¸ìš”.
ë°˜ë“œì‹œ JSON ë°°ì—´ë§Œ ì‘ë‹µí•˜ì„¸ìš”. ì˜ˆ: ["íŠ¹ì§•1","íŠ¹ì§•2","íŠ¹ì§•3"]
ê° í•­ëª©ì€ 15ì ì´ë‚´, êµ¬ì²´ì ì´ê³  ê´‘ê³  ì†Œì¬ì— ë°”ë¡œ ì“¸ ìˆ˜ ìˆëŠ” ë¬¸êµ¬ë¡œ.`,
      `ìƒí’ˆëª…: ${name}
ì¹´í…Œê³ ë¦¬: ${cat||'ë¯¸ìƒ'}
ê°€ê²©: ${price||'ë¯¸ìƒ'}`
    );
    const clean = raw.replace(/```json|```/g,'').trim();
    const feats = JSON.parse(clean);
    lbl.textContent = 'ğŸ’¡ AI ì¶”ì²œ íŠ¹ì§• (í´ë¦­í•˜ë©´ ìŠ¬ë¡¯ì— ì¶”ê°€)';
    box.innerHTML = feats.map((f,i) =>
      `<span class="feat-chip" onclick="addFeatChip(this,'${esc(f)}')" id="fc${i}"><span class="chip-plus">+</span>${esc(f)}</span>`
    ).join('');
  } catch(e) {
    lbl.textContent = 'ğŸ’¡ íŠ¹ì§•ì„ ì§ì ‘ ì…ë ¥í•´ì£¼ì„¸ìš”';
    wrap.style.display = 'none';
  }
}

// ì¹© í´ë¦­ â†’ ë¹ˆ ìŠ¬ë¡¯ì— ì¶”ê°€
function addFeatChip(chipEl, text) {
  if (chipEl.classList.contains('used')) return;
  const slots = document.querySelectorAll('#featSlots .feat-slot input');
  const empty = [...slots].find(el => !el.value.trim());
  if (!empty) { alert('ìŠ¬ë¡¯ì´ ëª¨ë‘ ì°¨ìˆì–´ìš”. ê¸°ì¡´ ë‚´ìš©ì„ ì§€ìš°ê³  ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.'); return; }
  empty.value = text;
  chipEl.classList.add('used');
  chipEl.querySelector('.chip-plus').textContent = 'âœ“';
}

// ìŠ¬ë¡¯ ê°œë³„ ì´ˆê¸°í™”
function clearSlot(btn) {
  const input = btn.previousElementSibling;
  input.value = '';
  // ì—°ê²°ëœ ì¹© ë³µì›
  const chips = document.querySelectorAll('#featSuggest .feat-chip');
  chips.forEach(c => {
    const chipTxt = c.textContent.replace(/^[+âœ“]/,'').trim();
    if (chipTxt === input.placeholder.replace(/^ì˜ˆ: /,'')) return;
    // ëª¨ë“  ìŠ¬ë¡¯ ê°’ê³¼ ë¹„êµí•´ì„œ ì—†ìœ¼ë©´ ë³µì›
    const allVals = [...document.querySelectorAll('#featSlots .feat-slot input')].map(el=>el.value.trim());
    const chipVal = c.textContent.replace(/^[+âœ“]/,'').trim();
    if (!allVals.includes(chipVal)) {
      c.classList.remove('used');
      c.querySelector('.chip-plus').textContent = '+';
    }
  });
}







function setNotice(type, msg) {
  const el = document.getElementById('fetchNotice');
  el.innerHTML = msg ? `<div class="notice n-${type}">${msg}</div>` : '';
}

// â”€â”€ Gemini API í˜¸ì¶œ
async function callClaude(sys, userContent) {
  // userContentëŠ” string ë˜ëŠ” array (ì´ë¯¸ì§€ í¬í•¨)
  let parts = [];
  if (typeof userContent === 'string') {
    parts = [{ text: sys + '\n\n' + userContent }];
  } else {
    // ì´ë¯¸ì§€ ë°°ì—´ + í…ìŠ¤íŠ¸
    const textItem = userContent.find(c => c.type === 'text');
    const imgItems = userContent.filter(c => c.type === 'image');
    parts = [
      { text: sys },
      ...imgItems.map(c => ({
        inlineData: { mimeType: c.source.media_type, data: c.source.data }
      })),
      { text: textItem?.text || '' }
    ];
  }

  const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`;
  const res = await fetch(url, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      contents: [{ role: 'user', parts }],
      generationConfig: { maxOutputTokens: 2000, temperature: 0.7 }
    })
  });
  if (!res.ok) {
    const e = await res.json();
    const msg = e.error?.message || 'API ì˜¤ë¥˜';
    if (msg.includes('API_KEY_INVALID') || msg.includes('API key')) throw new Error('API Keyê°€ ìœ íš¨í•˜ì§€ ì•Šì•„ìš”. aistudio.google.comì—ì„œ ë‹¤ì‹œ ë°œê¸‰í•´ì£¼ì„¸ìš”.');
    if (msg.includes('quota') || msg.includes('RESOURCE_EXHAUSTED')) throw new Error('ì˜¤ëŠ˜ ë¬´ë£Œ í•œë„(1,500íšŒ)ë¥¼ ì´ˆê³¼í–ˆì–´ìš”. ë‚´ì¼ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
    throw new Error(msg);
  }
  const d = await res.json();
  return d.candidates?.[0]?.content?.parts?.[0]?.text || '';
}

// â”€â”€ ë‹¨ê³„ í‘œì‹œ
function pg(n, s) {
  document.getElementById('pg'+n).className = 'p-item ' + (s||'');
}

// â”€â”€ ìƒì„±
async function generate() {
  if (!API_KEY) { openKeyModal(); return; }
  const name = document.getElementById('productName').value.trim();
  if (!name) { alert('ìƒí’ˆëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }

  const featSlots = [...document.querySelectorAll('#featSlots .feat-slot input')]
    .map(el => el.value.trim()).filter(Boolean);
  const feat = featSlots.join(', ');
  const target = document.getElementById('target').value.trim();
  const url    = '';

  const btn = document.getElementById('genBtn');
  btn.disabled = true;
  document.getElementById('genTxt').innerHTML = '<span class="spin"></span> ìƒì„± ì¤‘...';
  document.getElementById('progress').style.display = 'block';
  document.getElementById('emptyState').style.display = 'none';
  document.getElementById('resultWrap').style.display = 'none';
  S.selT = new Set(); S.selD = new Set();

  pg(1, 'active');

  try {
    const prompt = `ìƒí’ˆëª…: ${name}${feat?'\ní•µì‹¬ íŠ¹ì§•: '+feat:''}${target?'\níƒ€ê²Ÿ ê³ ê°: '+target:''}${url?'\nìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´ URL: '+url:''}\n\nìœ„ ìƒí’ˆì˜ ë„¤ì´ë²„ íŒŒì›Œë§í¬ ê´‘ê³  ì†Œì¬ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.`;

    // ì´ë¯¸ì§€ ì—¬ëŸ¬ ì¥ í¬í•¨
    let content;
    if (S.imgs.length > 0) {
      content = S.imgs.map(img => ({
        type: 'image',
        source: { type: 'base64', media_type: img.type || 'image/jpeg', data: img.b64 }
      }));
      content.push({ type: 'text', text: prompt });
    } else {
      content = prompt;
    }

    pg(1, 'done'); pg(2, 'active');

    const raw = await callClaude(
      `ë‹¹ì‹ ì€ ë„¤ì´ë²„ íŒŒì›Œë§í¬ ê´‘ê³  ì „ë¬¸ê°€ì…ë‹ˆë‹¤.
ë°˜ë“œì‹œ ìˆœìˆ˜ JSONë§Œ ì‘ë‹µí•˜ì„¸ìš”. ì½”ë“œë¸”ë¡, ì„¤ëª…, ë‹¤ë¥¸ í…ìŠ¤íŠ¸ ì ˆëŒ€ ê¸ˆì§€.

ìƒì„± ê·œì¹™:
- ì œëª©: 15ì ì´ë‚´, 15ê°œ. ìˆ«ìÂ·í˜œíƒÂ·íƒ€ê²Ÿì„ í™œìš©í•œ í´ë¦­ ìœ ë„ ë¬¸êµ¬.
- ì„¤ëª…: 45ì ì´ë‚´, 4ê°œ. í•µì‹¬ í˜œíƒì„ êµ¬ì²´ì ìœ¼ë¡œ.
- í‚¤ì›Œë“œ: 20ê°œ. ì‹¤ì œ ê²€ìƒ‰ì— ì“°ì´ëŠ” ì¡°í•© í‚¤ì›Œë“œ.
- ìµœìƒê¸‰(ìµœê³ Â·ìµœì €Â·1ìœ„Â·ë³´ì¥) í‘œí˜„ ê¸ˆì§€.
- ê·¼ê±° ì—†ëŠ” íš¨ëŠ¥ ê³¼ì¥ ê¸ˆì§€.

í˜•ì‹: {"titles":["...",...],"descs":["...",...],"keywords":["...",...]}`,
      content
    );

    let parsed;
    try { parsed = JSON.parse(raw.replace(/```json|```/g,'').trim()); }
    catch(e) { throw new Error('ê²°ê³¼ íŒŒì‹± ì‹¤íŒ¨. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.'); }

    S.titles = parsed.titles || [];
    S.descs  = parsed.descs  || [];
    S.kws    = parsed.keywords || [];

    pg(2, 'done'); pg(3, 'active');
    render();
    pg(3, 'done');
    document.getElementById('resultWrap').style.display = 'block';

  } catch(err) {
    alert('ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤:\n' + err.message);
    [1,2,3].forEach(n => pg(n,''));
    document.getElementById('emptyState').style.display = 'flex';
  } finally {
    btn.disabled = false;
    document.getElementById('genTxt').textContent = 'âœ¨ ê´‘ê³  ì†Œì¬ ìƒì„±í•˜ê¸°';
  }
}

// â”€â”€ ê²°ê³¼ ë Œë”ë§
function render() {
  // ì œëª©
  const tEl = document.getElementById('titleItems');
  tEl.innerHTML = '';
  S.titles.forEach((t, i) => {
    const len = [...t].length, over = len > 15;
    const g = i<5?'g1':i<10?'g2':'g3';
    // ì¶”ì²œ ê³ ì • ìœ„ì¹˜ (5ê°œì”© ê·¸ë£¹ â†’ ì œëª©1/2/3 ì¶”ì²œ)
    const recPin = i<5?'1':i<10?'2':'3';
    tEl.insertAdjacentHTML('beforeend',
      `<div class="item" id="t${i}">
        <button class="plus" onclick="tog('t',${i})">+</button>
        <div class="txt-wrap">
          <div class="txt">${esc(t)}</div>
          <div class="meta">
            <span class="gtag ${g}">ì œëª©${recPin} ì¶”ì²œ</span>
            <span class="cc${over?' over':''}">${len}/15ì${over?' âš ï¸':''}</span>
          </div>
        </div>
        <select class="pin-sel" id="pin${i}" onchange="onPinChange(${i},this)">
          <option value="">ìœ„ì¹˜ ê³ ì •</option>
          <option value="1">ì œëª© 1 ê³ ì •</option>
          <option value="2">ì œëª© 2 ê³ ì •</option>
          <option value="3">ì œëª© 3 ê³ ì •</option>
        </select>
        <input class="kw-in" placeholder="í‚¤ì›Œë“œì‚½ì…" />
      </div>`
    );
  });
  document.getElementById('tBadge').textContent = S.titles.length;

  // ì„¤ëª…
  const dEl = document.getElementById('descItems');
  dEl.innerHTML = '';
  const gs = ['g1','g2','g3','g4'];
  S.descs.forEach((d, i) => {
    const len = [...d].length, over = len > 45;
    dEl.insertAdjacentHTML('beforeend',
      `<div class="item" id="d${i}">
        <button class="plus" onclick="tog('d',${i})">+</button>
        <div class="txt-wrap">
          <div class="txt">${esc(d)}</div>
          <div class="meta"><span class="gtag ${gs[i]}">${i+1}ë²ˆ</span><span class="cc${over?' over':''}">${len}/45ì${over?' âš ï¸':''}</span></div>
        </div>
        <input class="kw-in" placeholder="í‚¤ì›Œë“œì‚½ì…" />
      </div>`
    );
  });
  document.getElementById('dBadge').textContent = S.descs.length;

  // í‚¤ì›Œë“œ
  document.getElementById('kwCloud').innerHTML = S.kws.map(k =>
    `<span class="kw-chip" onclick="cpKw(this)">${esc(k)}</span>`
  ).join('');
}

// ê³ ì • ìœ„ì¹˜ ì„ íƒ í•¸ë“¤ëŸ¬
function onPinChange(i, sel) {
  const val = sel.value;
  // ê°™ì€ ìœ„ì¹˜ì— ì´ë¯¸ ê³ ì •ëœ ë‹¤ë¥¸ í•­ëª© í•´ì œ
  if (val) {
    document.querySelectorAll('.pin-sel').forEach((s, idx) => {
      if (idx !== i && s.value === val) {
        s.value = '';
        s.className = 'pin-sel';
      }
    });
  }
  sel.className = 'pin-sel' + (val ? ' pinned' : '');
  // ì„ íƒëœ í•­ëª©ì´ë©´ ìë™ìœ¼ë¡œ ì„ íƒ ì²˜ë¦¬
  if (val && !S.selT.has(i)) tog('t', i);
  sync();
}

function cpKw(el) {
  navigator.clipboard.writeText(el.textContent).catch(()=>{});
  el.classList.add('copied');
  setTimeout(() => el.classList.remove('copied'), 800);
}

// â”€â”€ ì„ íƒ í† ê¸€
function tog(type, i) {
  const set = type==='t' ? S.selT : S.selD;
  set.has(i) ? set.delete(i) : set.add(i);
  document.getElementById(type+i).classList.toggle('on', set.has(i));
  const plusBtn = document.getElementById(type+i).querySelector('.plus');
  plusBtn.textContent = set.has(i) ? 'âœ“' : '+';
  sync();
}
function selAll(type) {
  const items = type==='t' ? S.titles : S.descs;
  const set   = type==='t' ? S.selT   : S.selD;
  items.forEach((_,i) => {
    set.add(i);
    const el = document.getElementById(type+i);
    if (el) { el.classList.add('on'); el.querySelector('.plus').textContent='âœ“'; }
  });
  sync();
}
function rem(type, i) {
  const set = type==='t' ? S.selT : S.selD;
  set.delete(i);
  const el = document.getElementById(type+i);
  if (el) { el.classList.remove('on'); el.querySelector('.plus').textContent='+'; }
  sync();
}

// â”€â”€ ë¯¸ë¦¬ë³´ê¸° ë™ê¸°í™”
function sync() {
  const ts = [...S.selT].map(i => S.titles[i]);
  const ds = [...S.selD].map(i => S.descs[i]);

  // ê³ ì • ìœ„ì¹˜ ë°˜ì˜í•´ì„œ ë¯¸ë¦¬ë³´ê¸° êµ¬ì„±
  const pinMap = {}; // {1: title, 2: title, 3: title}
  document.querySelectorAll('.pin-sel').forEach((s, i) => {
    if (s.value && S.selT.has(i)) pinMap[s.value] = S.titles[i];
  });
  const previewTitles = [pinMap['1']||ts[0]||'', pinMap['2']||ts[1]||'', pinMap['3']||ts[2]||''].filter(Boolean);
  const pvT = document.getElementById('pvTitle');
  if (previewTitles.length) { pvT.textContent = previewTitles.slice(0,2).join(' Â· '); pvT.style.color='#1a73e8'; pvT.style.fontWeight='700'; pvT.style.fontSize='14px'; }
  else { pvT.textContent='ì œëª©ì„ ì„ íƒí•˜ë©´ í‘œì‹œë©ë‹ˆë‹¤'; pvT.style.color='#bbb'; pvT.style.fontWeight='400'; pvT.style.fontSize='13px'; }
  const pvD = document.getElementById('pvDesc');
  if (ds.length) { pvD.textContent = ds[0]; pvD.style.color='#444'; pvD.style.fontSize='12px'; }
  else { pvD.textContent='ì„¤ëª…ì„ ì„ íƒí•˜ë©´ í‘œì‹œë©ë‹ˆë‹¤'; pvD.style.color='#bbb'; pvD.style.fontSize='11px'; }

  document.getElementById('sTCnt').textContent = ts.length+'ê°œ';
  document.getElementById('sDCnt').textContent = ds.length+'ê°œ';

  document.getElementById('sTList').innerHTML = ts.length
    ? [...S.selT].map(i => `<div class="sel-item">${esc(S.titles[i])}<button class="sel-x" onclick="rem('t',${i})">Ã—</button></div>`).join('')
    : '<div class="sel-empty">ì„ íƒ ì—†ìŒ</div>';
  document.getElementById('sDList').innerHTML = ds.length
    ? [...S.selD].map(i => `<div class="sel-item">${esc(S.descs[i])}<button class="sel-x" onclick="rem('d',${i})">Ã—</button></div>`).join('')
    : '<div class="sel-empty">ì„ íƒ ì—†ìŒ</div>';

  const tsb = document.getElementById('tSelBadge');
  if (ts.length) { tsb.style.display=''; tsb.textContent='âœ“ '+ts.length+'ê°œ ì„ íƒ'; } else tsb.style.display='none';
  const dsb = document.getElementById('dSelBadge');
  if (ds.length) { dsb.style.display=''; dsb.textContent='âœ“ '+ds.length+'ê°œ ì„ íƒ'; } else dsb.style.display='none';

  document.getElementById('exportBtn').disabled = !ts.length && !ds.length;
}

// â”€â”€ CSV
function exportCSV() {
  const ts = [...S.selT].map(i => S.titles[i]);
  const ds = [...S.selD].map(i => S.descs[i]);
  const url = document.getElementById('storeUrl').value || 'https://smartstore.naver.com/';
  const name = document.getElementById('productName').value;
  let csv = '\ufeffì œëª©,ì„¤ëª…,í‘œì‹œURL\n';
  const rows = Math.max(ts.length, ds.length, 1);
  for (let i=0; i<rows; i++) csv += `"${ts[i]||''}","${ds[Math.min(i,ds.length-1)]||''}","${url}"\n`;
  const a = document.createElement('a');
  a.href = URL.createObjectURL(new Blob([csv], {type:'text/csv;charset=utf-8;'}));
  a.download = `íŒŒì›Œë§í¬_${name}_${new Date().toLocaleDateString('ko')}.csv`;
  a.click();
}

function esc(s){return(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/'/g,'&#39;')}
</script>
</body>
</html>
